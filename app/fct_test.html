<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <!--[if lt IE 8]>
  <meta http-equiv="refresh" content="0;ie.html" />
  <![endif]-->
  <!-- build:css styles/main.css -->
  <link rel="stylesheet" href="public/styles/pc_admin.css">
  <!-- endbuild -->
</head>
<body class="fixed-sidebar full-height-layout gray-bg" style="overflow:hidden">
  <div id="wrapper">
  <!--左侧导航结束-->
  <!--右侧部分开始-->
  <div id="page-wrapper" class="gray-bg dashbard-1">
    <div class="row J_mainContent" id="content-main">
      <div class="wrapper wrapper-content animated">
        <div class="row">
          <div class="col-sm-12">
            <div class="ibox float-e-margins">
              <div class="ibox-title">
                <h5>文件上传</h5>
                <div class="ibox-tools">
                  <a class="collapse-link">
                    <i class="fa fa-chevron-up"></i>
                  </a>
                  <a class="dropdown-toggle" data-toggle="dropdown" href="form_file_upload.html#">
                    <i class="fa fa-wrench"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-user">
                    <li><a href="form_file_upload.html#">选项1</a>
                    </li>
                    <li><a href="form_file_upload.html#">选项2</a>
                    </li>
                  </ul>
                  <a class="close-link">
                    <i class="fa fa-times"></i>
                  </a>
                </div>
              </div>
              <div class="ibox-content">
                <div id="dropzoneDemo2" class="dropzone">
                  <div class="dropzone-previews"></div>
                  <!--<button type="submit" class="btn btn-primary pull-right">提交</button>-->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--右侧部分结束-->
</div>
<script>

    $(document).ready(function () {
      JQbox.open({url: ''})

      $('#dropzoneDemo2').uploads({
        'url': 'fct_admin.html',
        'input': '',
        'uploadWay': ''
      });
      /*Dropzone.autoDiscover = false;
      var tem_str = '<div class=\"dz-preview sortable_img dz-file-preview\">\n  <div class=\"dz-details\">\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n    <div class=\"dz-size\" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class=\"dz-progress\"><span class=\"dz-upload\" data-dz-uploadprogress></span></div>\n  <div class=\"dz-success-mark\"><span>✔</span></div>\n  <div class=\"dz-error-mark\"><span>✘</span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n</div>';
      $("div#dropzoneDemo").dropzone({
        url:'fct_admin_form_basic.html#',
        autoProcessQueue:false,
        uploadMultiple:true,
        parallelUploads:100,
        maxFiles:100,
        addRemoveLinks:true,
        sending: function(file, xhr, formData) {
          formData.append("filesize", file.size);
        },
        init:function(){
          var myDropzone=this;
           this.element.querySelector("button[type=submit]").addEventListener("click",function(e){
           e.preventDefault();
           e.stopPropagation();

           var current_queue = [];
           $('div.sortable_img').each( function(){
           current_queue.push($(this).data('file'));
           });

           myDropzone.removeAllFiles();

           for(var i=0;i<current_queue.length;i++){
           myDropzone.addFile(current_queue[i]);
           }

           myDropzone.processQueue()
           });
           this.on('addedfile', function(file) {
           // $('div.sortable_img:last-of-type').data('file', file);
           myDropzone.processQueue()

           });
          });

          this.on('addedfile', function(file) {
            $('div.sortable_img:last-of-type').data('file', file);
          });

        },
        previewTemplate: tem_str
      });

      var el = document.getElementById('dropzoneDemo');
      var sortable = new Sortable(el, {
        animation: 150,
        ghostClass: "sortable-ghost",
        handle: '.dz-preview'
      }); */

    })




  </script>
</body>
</html>
